{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$comment": "[HISTORICAL] 文档迁移映射配置 - 已完成迁移，仅供审计",
  "_historical_note": {
    "status": "已完成迁移，仅供审计",
    "migration_completed_at": "2026-01-30",
    "description": "本文件记录了将分散在 apps/*/docs/ 下的文档集中迁移到 docs/ 目录的映射关系。迁移工作已完成，本文件保留用于审计追溯。"
  },
  "version": "2.0.0",
  "created_at": "2026-01-28",
  "updated_at": "2026-01-30",
  "description": "将分散在各 apps/ 下的文档集中迁移到 docs/ 目录",
  
  "target_directories": {
    "logbook": "docs/logbook/",
    "gateway": "docs/gateway/",
    "seekdb": "docs/seekdb/",
    "contracts": "docs/contracts/"
  },
  
  "file_mappings": [
    {
      "source": "apps/logbook_postgres/docs/00_overview.md",
      "target": "docs/logbook/00_overview.md",
      "component": "logbook"
    },
    {
      "source": "apps/logbook_postgres/docs/01_architecture.md",
      "target": "docs/logbook/01_architecture.md",
      "component": "logbook"
    },
    {
      "source": "apps/logbook_postgres/docs/02_tools_contract.md",
      "target": "docs/logbook/02_tools_contract.md",
      "component": "logbook"
    },
    {
      "source": "apps/openmemory_gateway/docs/00_overview.md",
      "target": "docs/gateway/00_overview.md",
      "component": "gateway"
    },
    {
      "source": "apps/openmemory_gateway/docs/01_openmemory_deploy_windows.md",
      "target": "docs/gateway/01_openmemory_deploy_windows.md",
      "component": "gateway"
    },
    {
      "source": "apps/openmemory_gateway/docs/02_mcp_integration_cursor.md",
      "target": "docs/gateway/02_mcp_integration_cursor.md",
      "component": "gateway"
    },
    {
      "source": "apps/openmemory_gateway/docs/03_memory_contract.md",
      "target": "docs/gateway/03_memory_contract.md",
      "component": "gateway"
    },
    {
      "source": "apps/openmemory_gateway/docs/04_governance_switch.md",
      "target": "docs/gateway/04_governance_switch.md",
      "component": "gateway"
    },
    {
      "source": "apps/openmemory_gateway/docs/05_failure_degradation.md",
      "target": "docs/gateway/05_failure_degradation.md",
      "component": "gateway"
    },
    {
      "source": "apps/openmemory_gateway/docs/06_gateway_design.md",
      "target": "docs/gateway/06_gateway_design.md",
      "component": "gateway"
    },
    {
      "source": "apps/seekdb_rag_hybrid/docs/00_overview.md",
      "target": "docs/seekdb/00_overview.md",
      "component": "seekdb",
      "status": "stub_created",
      "migrated_at": "2026-01-30"
    },
    {
      "source": "apps/seekdb_rag_hybrid/docs/01_seekdb_deploy.md",
      "target": "docs/seekdb/01_seekdb_deploy.md",
      "component": "seekdb",
      "status": "stub_created",
      "migrated_at": "2026-01-30"
    },
    {
      "source": "apps/seekdb_rag_hybrid/docs/02_indexing_pipeline.md",
      "target": "docs/seekdb/02_indexing_pipeline.md",
      "component": "seekdb",
      "status": "stub_created",
      "migrated_at": "2026-01-30"
    },
    {
      "source": "apps/seekdb_rag_hybrid/docs/03_hybrid_retrieval.md",
      "target": "docs/seekdb/03_hybrid_retrieval.md",
      "component": "seekdb",
      "status": "stub_created",
      "migrated_at": "2026-01-30"
    },
    {
      "source": "apps/seekdb_rag_hybrid/contracts/evidence_packet.md",
      "target": "docs/contracts/evidence_packet.md",
      "component": "seekdb",
      "category": "contracts",
      "status": "stub_created",
      "migrated_at": "2026-01-30"
    }
  ],
  
  "reference_rewrite_rules": {
    "$comment": "需要重写文档引用的文件清单",
    "audit_completed_at": "2026-01-30",
    "files": [
      {
        "path": "apps/logbook_postgres/scripts/artifact_cli.py",
        "reason": "直接引用 docs/02_tools_contract.md",
        "current_reference": "docs/02_tools_contract.md",
        "new_reference": "docs/logbook/02_tools_contract.md",
        "status": "fixed",
        "fixed_at": "2026-01-30"
      },
      {
        "path": "apps/openmemory_gateway/templates/.mcp.json",
        "reason": "模板配置文件，可能需要更新相关文档路径说明",
        "current_reference": null,
        "new_reference": null,
        "status": "no_change_needed",
        "audit_note": "纯 MCP 服务器配置模板，无文档引用"
      },
      {
        "path": "apps/openmemory_gateway/gateway/gateway/memory_card.py",
        "reason": "Memory Card 生成器，文档中提及的字段规范可能需要对应文档引用",
        "current_reference": null,
        "new_reference": null,
        "status": "no_change_needed",
        "audit_note": "模块内文档完整，字段规范在 docstring 中自包含，无外部文档引用"
      },
      {
        "path": "apps/seekdb_rag_hybrid/templates/seek_indexer_stub.py",
        "reason": "索引同步脚本模板，注释中引用 Evidence Packet 结构",
        "current_reference": "contracts/evidence_packet.md (implicit)",
        "new_reference": "docs/contracts/evidence_packet.md",
        "status": "fixed",
        "fixed_at": "2026-01-30",
        "audit_note": "添加了 canonical 路径引用注释"
      },
      {
        "path": "apps/seekdb_rag_hybrid/templates/seek_query_stub.py",
        "reason": "查询脚本模板，可能引用文档",
        "current_reference": null,
        "new_reference": "docs/contracts/evidence_packet.md",
        "status": "fixed",
        "fixed_at": "2026-01-30",
        "audit_note": "添加了 Evidence Packet 规范文档引用"
      },
      {
        "path": "apps/seekdb_rag_hybrid/seek_query.py",
        "reason": "证据检索工具，输出 Evidence Packet 格式",
        "current_reference": null,
        "new_reference": "docs/contracts/evidence_packet.md",
        "status": "no_change_needed",
        "audit_note": "文件无文档字符串引用，Evidence Packet 结构通过 seek_query_stub.py 模板文档关联"
      },
      {
        "path": "libs/OpenMemory/ARCHITECTURE.md",
        "reason": "架构文档可能引用目录结构",
        "current_reference": null,
        "new_reference": null,
        "status": "no_change_needed",
        "audit_note": "引用的是 OpenMemory 库内部文档（README.md, Why.md 等），非 engram 文档，无需修改"
      }
    ]
  },
  
  "summary": {
    "total_source_files": 15,
    "logbook_files": 3,
    "gateway_files": 7,
    "seekdb_files": 4,
    "contracts_files": 1,
    "files_requiring_reference_update": 7
  }
}
