# 统一配置（复制为 config.ps1 并按需修改）
# 说明：敏感信息（密码/密钥）建议用系统环境变量提供，避免落盘。

$Global:EngramHome = "C:\engram"
$Global:LogsDir    = "C:\engram\logs"
$Global:BackupDir  = "D:\engram-backups"

# 服务命令（按你的实际路径替换）
# 推荐：使用 venv 的 engram-gateway.exe，或 python -m engram.gateway.main
$Global:EngramCmd  = "C:\engram\venv\Scripts\engram-gateway.exe"
$Global:EngramArgs = ""

# Engram 环境变量（示例）
$Global:EngramEnv = @{
  "PROJECT_KEY" = "default"
  "POSTGRES_DSN" = "postgresql://logbook_svc:<pwd>@127.0.0.1:5432/engram"
  "OPENMEMORY_BASE_URL" = "http://127.0.0.1:8080"
  "OM_API_KEY" = "<change_me>"
  "GATEWAY_PORT" = "8787"
}

# OpenMemory（Node 后端）
$Global:OpenMemoryCmd  = "C:\Program Files\nodejs\node.exe"
$Global:OpenMemoryArgs = "C:\openmemory\backend\server.js"

$Global:OpenMemoryEnv = @{
  "OM_METADATA_BACKEND" = "postgres"
  "OM_PG_HOST" = "127.0.0.1"
  "OM_PG_PORT" = "5432"
  "OM_PG_DB" = "engram"
  "OM_PG_USER" = "openmemory_svc"
  "OM_PG_PASSWORD" = "<change_me>"
  "OM_PG_SCHEMA" = "openmemory"
  "OM_API_KEY" = "<change_me>"
  "OM_PORT" = "8080"
}

# Postgres
$Global:PgHost = "127.0.0.1"
$Global:PgPort = 5432
$Global:PgDb   = "engram_project"
$Global:PgSuperUser = "postgres"

# 端口
$Global:OpenMemoryPort = 8080
$Global:EngramPort     = 8787

# 密钥（建议使用环境变量）
# $env:ENGRAM_API_KEY
# $env:OM_API_KEY
# $env:PGPASSWORD
