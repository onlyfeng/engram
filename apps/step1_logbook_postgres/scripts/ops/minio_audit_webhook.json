{
  "_comment": "MinIO Audit Webhook 配置模板（预留，不默认启用）",
  "_description": "用于将 MinIO 审计日志推送到外部日志系统（如 Elasticsearch、Kafka、Webhook）",
  "_usage": "mc admin config set myminio audit_webhook:engram endpoint='https://logs.example.com/minio' auth_token='xxx' queue_dir='/data/.audit_queue'",
  "_docs": "https://min.io/docs/minio/linux/administration/monitoring/audit-logging.html",

  "_security_checklist": [
    "1. endpoint 必须使用 HTTPS（生产环境强制）",
    "2. auth_token 使用 32+ 字符的强随机 token（如: openssl rand -base64 32）",
    "3. 如需双向 TLS（mTLS），配置 client_cert 和 client_key",
    "4. queue_dir 使用持久化路径（/data/.audit_queue 已挂载到 minio_data volume）",
    "5. queue_size 根据流量调整，默认 10000 适合中小规模部署"
  ],

  "audit_webhook": {
    "engram": {
      "_enabled": false,
      "_enable_instructions": "设置环境变量 MINIO_AUDIT_WEBHOOK_ENDPOINT 启用",
      "endpoint": "https://logs.example.com/minio/audit",
      "auth_token": "${MINIO_AUDIT_WEBHOOK_AUTH_TOKEN}",
      "client_cert": "${MINIO_AUDIT_CLIENT_CERT}",
      "client_key": "${MINIO_AUDIT_CLIENT_KEY}",
      "queue_dir": "/data/.audit_queue",
      "queue_size": 10000,
      "_queue_dir_note": "使用 /data/ 前缀确保队列持久化到 minio_data volume，断电不丢失"
    }
  },

  "_env_example": {
    "_comment": "docker-compose 环境变量示例",
    "MINIO_AUDIT_WEBHOOK_ENDPOINT": "https://logs.example.com/minio/audit",
    "MINIO_AUDIT_WEBHOOK_AUTH_TOKEN": "your-secure-random-token-32chars",
    "MINIO_AUDIT_CLIENT_CERT": "/certs/client.crt",
    "MINIO_AUDIT_CLIENT_KEY": "/certs/client.key",
    "MINIO_AUDIT_QUEUE_DIR": "/data/.audit_queue",
    "MINIO_AUDIT_QUEUE_SIZE": "10000"
  },

  "_alternative_kafka": {
    "_comment": "如需使用 Kafka 作为审计日志出口，使用以下配置",
    "audit_kafka": {
      "engram": {
        "_enabled": false,
        "brokers": "kafka:9092",
        "topic": "minio-audit-logs",
        "sasl": {
          "enable": false,
          "username": "",
          "password": "",
          "mechanism": "PLAIN"
        },
        "tls": {
          "enable": false,
          "skip_verify": false
        }
      }
    }
  },

  "_logger_webhook": {
    "_comment": "如需使用 logger webhook（区别于 audit webhook，用于 MinIO 内部日志）",
    "logger_webhook": {
      "engram": {
        "_enabled": false,
        "endpoint": "https://logs.example.com/minio/logger",
        "auth_token": "${MINIO_LOGGER_AUTH_TOKEN}"
      }
    }
  }
}
