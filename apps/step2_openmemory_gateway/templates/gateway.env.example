# Memory Gateway 环境变量示例
#
# ============================================
# 数据库 Schema 隔离约定 (重要)
# ============================================
# OpenMemory 与 Step1 采用"同库多 Schema"模式共用 PostgreSQL:
#
# ┌─────────────────────────────────────────────────────────┐
# │  PostgreSQL Database (例如: proj_a)                     │
# │  ├── governance schema  ← Step1 治理数据                │
# │  ├── logbook schema     ← Step1 日志数据                │
# │  └── openmemory schema  ← OpenMemory 记忆数据 (默认)    │
# └─────────────────────────────────────────────────────────┘
#
# OpenMemory Schema 配置说明:
# - 统一栈默认 schema: openmemory (docker-compose.unified.yml 中 OM_PG_SCHEMA 默认值)
# - ⚠️ OM_PG_SCHEMA 禁止使用 public（precheck 会拦截）
# - 多租户部署: 可在 OpenMemory 侧覆盖 OM_PG_SCHEMA=<PROJECT_KEY>_openmemory
#   例如: proj_a_openmemory, proj_b_openmemory（需同步修改 05 脚本）
#
# 注意: Gateway 不直连 OpenMemory 的 PostgreSQL，
#       但部署者须确保 OpenMemory 的 OM_PG_SCHEMA 与此约定一致。
# ============================================

PROJECT_KEY=proj_a
POSTGRES_DSN=postgresql://logbook_svc:***@<server-ip>:5432/proj_a
OPENMEMORY_BASE_URL=http://127.0.0.1:8080

# OpenMemory API 密钥（推荐使用 OM_API_KEY 与 unified 栈保持一致）
OM_API_KEY=***
# 兼容旧配置: OPENMEMORY_API_KEY=***（如已设置，优先级高于 OM_API_KEY）

GATEWAY_PORT=8787
DEFAULT_TEAM_SPACE=team:proj_a
PRIVATE_SPACE_PREFIX=private:
